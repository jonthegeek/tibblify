---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# listparser

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/listparser)](https://CRAN.R-project.org/package=listparser)
<!-- badges: end -->

The goal of listparser is to ...

## Installation

You can install the released version of listparser from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("listparser")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(listparser)

str(got_chars[[1]])
```

```{r}
got_chars_tibble <- tibblify(got_chars)
dplyr::glimpse(got_chars_tibble)
```

```{r}
get_spec(got_chars_tibble)
```

```{r}
tibblify(
  got_chars,
  lcols(
    id = lcol_int("id"),
    name = lcol_chr("name"),
    gender = lcol_chr("gender"),
    aliases = lcol_lst_flat(
      "aliases",
      .ptype = character(0),
      .default = NULL
    ),
    allegiances = lcol_lst_flat(
      "allegiances",
      .ptype = character(0),
      .default = NULL
    )
  )
)
```



## Parsing other types

`listparser` provides shortcuts for a couple of common types. To parse a type without a parser use `lcol_vec()`. For example to parse a list with `difftimes`

```{r}
now <- Sys.time()
past <- now - c(100, 200)

x <- list(
  list(timediff = now - past[1]),
  list(timediff = now - past[2])
)

x
```



```{r}
ptype <- as.difftime(0, units = "secs")

tibblify(
  x,
  lcols(
    lcol_vec("timediff", ptype)
  )
)
```

